%ul{:class => "navigation-#{ level }"}
  - for child in root.children
    %li
      - if stack.route.include? child
        = link_to h(child.label), child.calculated_path, :class => 'selected'
        - unless child.children.empty?
          = stack.render_navigation :root, :root => child, :level => level + 1
      - else
        = link_to h(child.label), child.calculated_path
