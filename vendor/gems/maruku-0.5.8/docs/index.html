<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC
    "-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1//EN"
    "http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg.dtd">
<html xmlns:svg='http://www.w3.org/2000/svg' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
<head><meta content='application/xhtml+xml;charset=utf-8' http-equiv='Content-type' /><title>Maruku: a Markdown-superset interpreter</title><link href='style.css' rel='stylesheet' type='text/css' />
</head>
<body>
<p><img src='logo.png' id='logo' alt='MaRuKu' /></p>

<h1 id='maruku_a_markdownsuperset_interpreter'>Mar<strong>u</strong>k<strong>u</strong>: a Markdown-superset interpreter</h1>

<p><a href='http://maruku.rubyforge.org/'>Maruku</a> is a Markdown interpreter written in <a href='http://www.ruby-lang.org'>Ruby</a>.</p>

<blockquote id='news'>
<p><a href='#release_notes'>Last release</a> is version 0.5.6 &#8211; 2007-05-22.</p>

<p>Install using <a href='http://rubygems.org'>rubygems</a>:</p>

<pre><code>$ gem install maruku</code></pre>

<p>Use this command to update to latest version:</p>

<pre><code>$ gem update maruku</code></pre>
</blockquote>
<hr />
<p>Maruku allows you to write in an easy-to-read-and-write syntax, like this:</p>

<blockquote>
<p><a href='http://maruku.rubyforge.org/maruku.md'>This document in Markdown</a></p>
</blockquote>

<p>Then it can be translated to HTML:</p>

<blockquote>
<p><a href='http://maruku.rubyforge.org/maruku.html'>This document in HTML</a></p>
</blockquote>

<p>or LaTeX, which is then converted to PDF:</p>

<blockquote>
<p><a href='http://maruku.rubyforge.org/maruku.pdf'>This document in PDF</a></p>
</blockquote>

<p>Maruku implements:</p>

<ul>
<li>
<p>the original <a href='http://maruku.rubyforge.org/markdown_syntax.html'>Markdown syntax</a> (<a href='http://maruku.rubyforge.org/markdown_syntax.html'>HTML</a> or <a href='http://maruku.rubyforge.org/markdown_syntax.pdf'>PDF</a>), translated by Maruku).</p>
</li>

<li>
<p>all the improvements in <a href='http://www.michelf.com/projects/php-markdown/extra/'>PHP Markdown Extra</a>.</p>
</li>

<li>
<p>a new <a href='http://maruku.rubyforge.org/proposal.html'>meta-data syntax</a></p>
</li>
</ul>

<p><strong>Authors</strong>: Maruku has been developed so far by <a href='http://www.dis.uniroma1.it/~acensi/'>Andrea Censi</a>. Contributors are most welcome!</p>

<p><strong>The name of the game</strong>: Maruku is the <a href='http://en.wikipedia.org/wiki/Romaji'>romaji</a> transliteration of the <a href='http://en.wikipedia.org/wiki/Katakana'>katakana</a> transliteration of &#8220;Mark&#8221;, the first word in Markdown. I chose this name because Ruby is Japanese, and also the sillable &#8220;ru&#8221; appears in Maruku.</p>
<hr />
<p>Table of contents: (<strong>auto-generated by Maruku!</strong>)</p>
<div class='maruku_toc'><ul style='list-style: none;'><li><span class='maruku_section_number'>1. </span><a href='#release_notes'>Release notes</a></li><li><span class='maruku_section_number'>2. </span><a href='#download'>Download</a><ul style='list-style: none;'><li><span class='maruku_section_number'>2.1. </span><a href='#bugs_report'>Bugs report</a></li></ul></li><li><span class='maruku_section_number'>3. </span><a href='#usage'>Usage</a><ul style='list-style: none;'><li><span class='maruku_section_number'>3.1. </span><a href='#embedded_maruku'>Embedded Maruku</a></li><li><span class='maruku_section_number'>3.2. </span><a href='#from_the_command_line'>From the command line</a></li></ul></li><li><span class='maruku_section_number'>4. </span><a href='#maruku-and-bluecloth'>Maruku and Bluecloth</a></li><li><span class='maruku_section_number'>5. </span><a href='#features'>Maruku summary of features</a><ul style='list-style: none;'><li><span class='maruku_section_number'>5.1. </span><a href='#meta'>New meta-data syntax</a></li><li><span class='maruku_section_number'>5.2. </span><a href='#toc-generation'>Automatic generation of the table of contents</a></li><li><span class='maruku_section_number'>5.3. </span><a href='#entities'>Use HTML entities</a></li><li><span class='maruku_section_number'>5.4. </span><a href='#this_header_contains_emphasis_strong_text_and_'>This header contains <em>emphasis</em> <strong>strong text</strong> and <code>code</code></a></li></ul></li><li><span class='maruku_section_number'>6. </span><a href='#extra'>Examples of PHP Markdown Extra syntax</a></li></ul></div><hr />
<h2 id='release_notes'><span class='maruku_section_number'>1. </span>Release notes</h2>

<p>Note: Maruku seems to be very robust, nevertheless it is still beta-level software. So if you want to use it in production environments, please check back in a month or so, while we squash the remaining bugs.</p>

<p>In the meantime, feel free to toy around, and please signal problems, request features, by <a href='http://www.dis.uniroma1.it/~acensi/contact.html'>contacting me</a> or using the <a href='http://rubyforge.org/tracker/?group_id=2795'>tracker</a>. For issues about the Markdown syntax itself and improvements to it, please write to the <a href='http://six.pairlist.net/mailman/listinfo/markdown-discuss'>Markdown-discuss mailing list</a>.</p>

<p>Have fun!</p>

<p>See the <a href='http://maruku.rubyforge.org/changelog.html#stable'>changelog</a>.</p>

<h2 id='download'><span class='maruku_section_number'>2. </span>Download</h2>

<p>The development site is <a href='http://rubyforge.org/projects/maruku/'>http://rubyforge.org/projects/maruku/</a>.</p>

<p>Install with:</p>

<pre style='background-color: #efefff;'><code class='sh' lang='sh'>$ gem install maruku</code></pre>

<p>Released files can also be seen at <a href='http://rubyforge.org/frs/?group_id=2795'>http://rubyforge.org/frs/?group_id=2795</a>.</p>

<p>Anonymous access to the repository is possible with:</p>

<pre style='background-color: #efefff;'><code class='sh' lang='sh'>$ svn checkout svn://rubyforge.org/var/svn/maruku/trunk</code></pre>

<p>If you want commit access to the repository, just create an account on Rubyforge and <a href='http://www.dis.uniroma1.it/~acensi/contact.html'>drop me a mail</a>.</p>

<h3 id='bugs_report'><span class='maruku_section_number'>2.1. </span>Bugs report</h3>

<p>Use the <a href='http://rubyforge.org/tracker/?group_id=2795'>tracker</a> or <a href='http://www.dis.uniroma1.it/~acensi/contact.html'>drop me an email</a>.</p>

<h2 id='usage'><span class='maruku_section_number'>3. </span>Usage</h2>

<h3 id='embedded_maruku'><span class='maruku_section_number'>3.1. </span>Embedded Maruku</h3>

<p>This is the basic usage:</p>

<pre style='background-color: #efffef;'><code class='ruby' lang='ruby'><span class='ident'>require</span> <span class='punct'>&#39;</span><span class='string'>rubygems</span><span class='punct'>&#39;</span>
<span class='ident'>require</span> <span class='punct'>&#39;</span><span class='string'>maruku</span><span class='punct'>&#39;</span>

<span class='ident'>doc</span> <span class='punct'>=</span> <span class='constant'>Maruku</span><span class='punct'>.</span><span class='ident'>new</span><span class='punct'>(</span><span class='ident'>markdown_string</span><span class='punct'>)</span>
<span class='ident'>puts</span> <span class='ident'>doc</span><span class='punct'>.</span><span class='ident'>to_html</span></code></pre>

<p>The method <code>to_html</code> outputs only an HTML fragment, while the method <code>to_html_document</code> outputs a complete XHTML 1.0 document:</p>

<pre style='background-color: #efffef;'><code class='ruby' lang='ruby'><span class='ident'>puts</span> <span class='ident'>doc</span><span class='punct'>.</span><span class='ident'>to_html_document</span></code></pre>

<p>You can have the REXML document tree with:</p>

<pre style='background-color: #efffef;'><code class='ruby' lang='ruby'><span class='ident'>tree</span> <span class='punct'>=</span> <span class='ident'>doc</span><span class='punct'>.</span><span class='ident'>to_html_document_tree</span></code></pre>

<h3 id='from_the_command_line'><span class='maruku_section_number'>3.2. </span>From the command line</h3>

<p>There is one command-line program installed: <code>maruku</code>.</p>

<p>Without arguments, it converts Markdown to HTML:</p>

<pre style='background-color: #efefff;'><code class='sh' lang='sh'>$ maruku file.md  # creates file.html</code></pre>

<p>With the <code>--pdf</code> arguments, it converts Markdown to LaTeX, then calls <code>pdflatex</code> to transform to PDF:</p>

<pre style='background-color: #efefff;'><code class='sh' lang='sh'>$ maruku --pdf file.md  # creates file.tex and file.pdf</code></pre>

<h2 id='maruku-and-bluecloth'><span class='maruku_section_number'>4. </span>Maruku and Bluecloth</h2>

<p>The other Ruby implementation of Markdown is <a href='http://www.deveiate.org/projects/BlueCloth'>Bluecloth</a>.</p>

<p>Maruku is much different in philosophy from Bluecloth: the biggest difference is that <em>parsing</em> is separated from <em>rendering</em>. In Maruku, an in-memory representation of the Markdown document is created. Instead, Bluecloth mantains the document in memory as a String at all times, and does a series of <code>gsub</code> to transform to HTML.</p>

<p>Maruku is usually faster than Bluecloth. Bluecloth is faster for very small documents. Bluecloth sometimes chokes on very big documents (it is reported that the blame should be on Ruby&#8217;s regexp implementation).</p>

<p>This is the canonical benchmark (the Markdown specification), executed with Ruby 1.8.5 on a Powerbook 1.5GhZ:</p>

<pre><code>BlueCloth (to_html): parsing 0.01 sec + rendering 1.87 sec = 1.88 sec   (1.00x)
   Maruku (to_html): parsing 0.66 sec + rendering 0.43 sec = 1.09 sec   (1.73x)
  Maruku (to_latex): parsing 0.67 sec + rendering 0.23 sec = 0.90 sec   (2.10x)</code></pre>

<p>Please note that Maruku has a lot more features and therefore is looking for much more patterns in the file.</p>

<h2 id='features'><span class='maruku_section_number'>5. </span>Maruku summary of features</h2>

<ul>
<li>
<p>Supported syntax</p>

<ul>
<li><a href='http://daringfireball.net/projects/markdown/syntax'>Basic Markdown</a></li>

<li><a href='#extra'>Markdown Extra</a></li>

<li><a href='#meta'>Meta-data syntax</a></li>
</ul>
</li>

<li>
<p>Output</p>

<ul>
<li>
<p>XHTML</p>

<ul>
<li>Syntax highlighting via the <a href='http://syntax.rubyforge.org/'><code>syntax</code></a> library.</li>
</ul>
</li>

<li>
<p>LaTeX</p>

<ul>
<li><a href='#entities'>Translation of HTML entities to LaTeX</a></li>

<li>Syntax highlighting via the <a href='http://www.ctan.org/tex-archive/macros/latex/contrib/listings/'><code>listings</code></a> package.</li>
</ul>
</li>
</ul>
</li>

<li>
<p>Misc</p>

<ul>
<li>
<p><a href='exd.html'>Documentation for supported attributes</a></p>
</li>

<li>
<p><a href='#toc-generation'>Automatic generation of the TOC</a></p>
</li>
</ul>
</li>
</ul>

<p><strong>Experimental features (not released yet)</strong></p>

<ul>
<li><a href='http://maruku.rubyforge.org/math.xhtml'>LaTeX Math syntax</a> (not enabled by default)</li>

<li>An extension system for adding new syntax is available, but the API is bound to change in the future, so please don&#8217;t use it.</li>

<li>LaTeX to MathML using either one of <a href='http://ritex.rubyforge.org'><code>ritex</code></a>, <a href='http://golem.ph.utexas.edu/~distler/code/itexToMML/'><code>itex2mml</code></a>, <a href='http://www.blahtex.org'><code>blahtex</code></a>.</li>

<li>LaTeX to PNG using <a href='http://www.blahtex.org'><code>blahtex</code></a>.</li>
</ul>

<h3 id='meta'><span class='maruku_section_number'>5.1. </span>New meta-data syntax</h3>

<p>Maruku implements a syntax that allows to attach &#8220;meta&#8221; information to objects.</p>

<p>See <a href='http://maruku.rubyforge.org/proposal.html'>this proposal</a> for how to attach metadata to the elements.</p>

<p>See the <a href='exd.html'>documentation for supported attributes</a>.</p>

<p>Meta-data for the document itself is specified through the use of email headers:</p>

<pre style='background-color: #ffefef;'><code>Title: A simple document containing meta-headers
CSS: style.css

Content of the document</code></pre>

<p>When creating the document through</p>

<pre style='background-color: #efffef;'><code class='ruby' lang='ruby'><span class='constant'>Maruku</span><span class='punct'>.</span><span class='ident'>new</span><span class='punct'>(</span><span class='ident'>s</span><span class='punct'>).</span><span class='ident'>to_html_document</span></code></pre>

<p>the title and stylesheet are added as expected.</p>

<p>Meta-data keys are assumed to be case-insensitive.</p>

<h3 id='toc-generation'><span class='maruku_section_number'>5.2. </span>Automatic generation of the table of contents</h3>

<p>If you create a list, and then set the <code>toc</code> attribute, when rendering Maruku will create an auto-generated table of contents.</p>

<pre><code>* This will become a table of contents (this text will be scraped).
{:toc}</code></pre>

<p>You can see an example of this at the beginning of this document.</p>

<h3 id='entities'><span class='maruku_section_number'>5.3. </span>Use HTML entities</h3>

<p>If you want to use HTML entities, go on! We will take care of the translation to LaTeX:</p>
<table><thead><tr><th>Entity</th><th>Result</th></tr></thead><tbody><tr><td style='text-align: left;'><code>&amp;copy;</code></td><td style='text-align: left;'>&#169;</td>
</tr><tr><td style='text-align: left;'><code>&amp;pound;</code></td><td style='text-align: left;'>&#163;</td>
</tr><tr><td style='text-align: left;'><code>&amp;lambda;</code></td><td style='text-align: left;'>&#955;</td>
</tr><tr><td style='text-align: left;'><code>&amp;mdash;</code></td><td style='text-align: left;'>&#8212;</td>
</tr></tbody></table>
<p>See the <a href='http://maruku.rubyforge.org/entity_test.html'>list of supported entities</a> (<a href='http://maruku.rubyforge.org/entity_test.pdf'>pdf</a>).</p>

<h3 id='this_header_contains_emphasis_strong_text_and_'><span class='maruku_section_number'>5.4. </span>This header contains <em>emphasis</em> <strong>strong text</strong> and <code>code</code></h3>

<p>Note that this header contains formatting and it still works, also in the table of contents.</p>

<p>And <a href='#features'>This is a <em>link</em> with <strong>all</strong> <strong><em>sort</em></strong> of <code>weird stuff</code></a> in the text.</p>

<h2 id='extra'><span class='maruku_section_number'>6. </span>Examples of PHP Markdown Extra syntax</h2>

<ul>
<li>
<p>tables</p>

<pre style='background-color: #ffefef;'><code>Col1 | Very very long head | Very very long head|
-----|:-------------------:|-------------------:|
cell | center-align        | right-align        |</code></pre>
<table><thead><tr><th>Col1</th><th>Very very long head</th><th>Very very long head</th></tr></thead><tbody><tr><td style='text-align: left;'>cell</td><td style='text-align: center;'>center-align</td><td style='text-align: right;'>right-align</td>
</tr></tbody></table></li>

<li>
<p>footnotes <sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup></p>

<pre style='background-color: #ffefef;'><code>* footnotes [^foot]

[^foot]: I really was missing those.</code></pre>
</li>
</ul>

<ul>
<li>
<p>Markdown inside HTML elements</p>

<pre><code class='xml' lang='xml'><span class='punct'>&lt;</span><span class='tag'>div</span> <span class='attribute'>markdown</span><span class='punct'>=&quot;</span><span class='string'>1</span><span class='punct'>&quot;</span> <span class='attribute'>style</span><span class='punct'>=&quot;</span><span class='string'>border: solid 1px black</span><span class='punct'>&quot;&gt;</span>
   This is a div with Markdown **strong text**
<span class='punct'>&lt;/</span><span class='tag'>div</span><span class='punct'>&gt;</span></code></pre>
<div style='border: solid 1px black'>
<p>This is a div with Markdown <strong>strong text</strong></p>
</div></li>

<li>
<p>header ids</p>

<pre style='background-color: #ffefef;'><code>## Download ##     {#download}</code></pre>

<p>For example, <a href='#download'>a link to the download</a> header.</p>
</li>

<li>
<p>definition lists</p>

<pre style='background-color: #ffefef;'><code>Definition list
: something very hard to parse</code></pre>

<dl>
<dt>Definition list</dt>

<dd>something very hard to parse</dd>
</dl>
</li>

<li>
<p>abbreviations or <abbr title='Simply an abbreviation'>ABB</abbr> for short.</p>
</li>
</ul>
<script src='http://www.google-analytics.com/urchin.js' type='text/javascript'>
</script><script type='text/javascript'>
_uacct = "UA-155626-2";
urchinTracker();
</script><!--
Future developments                              {#future}

I think that [Pandoc] and [MultiMarkdown] are very cool projects.
However, they are written in Haskell and Perl, respectively. 
I would love to have an equivalent in Ruby.

[Pandoc]: http://sophos.berkeley.edu/macfarlane/pandoc/
[MultiMarkdown]: http://fletcher.freeshell.org/wiki/MultiMarkdown

--><div class='footnotes'><hr /><ol><li id='fn:1'>
<p>I really was missing those.</p>
<a href='#fnref:1' rev='footnote'>&#8617;</a></li></ol></div></body></html>
